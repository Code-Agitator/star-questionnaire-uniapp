"use strict";var e=(e,o,t)=>new Promise(((n,a)=>{var s=e=>{try{i(t.next(e))}catch(o){a(o)}},u=e=>{try{i(t.throw(e))}catch(o){a(o)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,u);i((t=t.apply(e,o)).next())}));const o=require("../../common/vendor.js"),t=require("../../service/index.js");require("../../store/index.js");const n=require("../../store/modules/auth/index.js");require("../../service/helper.js"),require("../../constants/index.js"),require("../../store/modules/count/index.js"),require("../../store/modules/app/index.js"),require("../../composables/useToken.js");if(!Array){((()=>"../../node-modules/nutui-uniapp/components/input/input.js")+(()=>"../../node-modules/nutui-uniapp/components/textarea/textarea.js")+(()=>"../../node-modules/nutui-uniapp/components/radio/radio.js")+(()=>"../../node-modules/nutui-uniapp/components/radiogroup/radiogroup.js")+(()=>"../../node-modules/nutui-uniapp/components/checkbox/checkbox.js")+(()=>"../../node-modules/nutui-uniapp/components/checkboxgroup/checkboxgroup.js")+(()=>"../../node-modules/nutui-uniapp/components/formitem/formitem.js")+(()=>"../../node-modules/nutui-uniapp/components/button/button.js")+o.resolveComponent("layout-default-uni"))()}const a=o.defineComponent({__name:"index",setup(a){const s=n.useAuthStore(),u=o.ref(0),i=o.ref([]),r=o.ref({});function p(){return e(this,null,(function*(){const e=r.value,n={};for(const o in e)"object"==typeof e[o]&&Array.isArray(e[o])?n[o]=e[o].join(","):n[o]=e[o];(yield t.instance.post("/api/answer",{questionId:u.value,answers:n},{headers:{Authorization:`Bearer ${s.token}`}})).data.success&&o.index.navigateBack({delta:1})}))}return o.onLoad((n=>e(this,null,(function*(){const e={};u.value=null==n?void 0:n.id;const a=(yield t.instance.get(`/api/question/${u.value}`,{headers:{Authorization:`Bearer ${s.token}`}})).data;a.success||(yield o.index.navigateTo({url:"/pages/index/login"})),a.data.componentList.forEach((o=>{o.props.options=o.props.options||[],e[o.feId]="","questionCheckbox"===o.type&&(e[o.feId]=[])})),i.value=a.data.componentList,r.value=e})))),(e,t)=>({a:o.f(o.unref(i),((e,t,n)=>{var a,s,u,i;return o.e({a:"questionInput"===e.type},"questionInput"===e.type?{b:"a03a9caa-2-"+n+",a03a9caa-1-"+n,c:o.o((t=>o.unref(r)[e.feId]=t),e.feId),d:o.p({placeholder:e.props.placeholder,modelValue:o.unref(r)[e.feId]})}:{},{e:"questionTextarea"===e.type},"questionTextarea"===e.type?{f:"a03a9caa-3-"+n+",a03a9caa-1-"+n,g:o.o((t=>o.unref(r)[e.feId]=t),e.feId),h:o.p({placeholder:e.props.placeholder,modelValue:o.unref(r)[e.feId]})}:{},{i:"questionRadio"===e.type&&e.props.options},"questionRadio"===e.type&&e.props.options?{j:o.f(e.props.options,((e,t,a)=>({a:o.t(null==e?void 0:e.text),b:null==e?void 0:e.value,c:"a03a9caa-5-"+n+"-"+a+",a03a9caa-4-"+n,d:o.p({shape:"button",label:null==e?void 0:e.text,size:"large"})}))),k:"a03a9caa-4-"+n+",a03a9caa-1-"+n,l:o.o((t=>o.unref(r)[e.feId]=t),e.feId),m:o.p({modelValue:o.unref(r)[e.feId]})}:{},{n:"questionCheckbox"===e.type&&e.props.list},"questionCheckbox"===e.type&&e.props.list?{o:o.f(e.props.list,((e,t,a)=>({a:o.t(e.text),b:null==e?void 0:e.value,c:"a03a9caa-7-"+n+"-"+a+",a03a9caa-6-"+n,d:o.p({label:e.text})}))),p:"a03a9caa-6-"+n+",a03a9caa-1-"+n,q:o.o((t=>o.unref(r)[e.feId]=t),e.feId),r:o.p({modelValue:o.unref(r)[e.feId]})}:{},{s:"questionParagraph"===e.type},"questionParagraph"===e.type?{t:o.t(null==(a=null==e?void 0:e.props)?void 0:a.text),v:o.n((null==(s=e.props)?void 0:s.isCenter)?"text-center":"")}:{},{w:"questionInfo"===e.type},"questionInfo"===e.type?{x:o.t(e.props.title),y:o.t(e.props.desc)}:{},{z:"questionTitle"===e.type},"questionTitle"===e.type?{A:o.t(e.props.text),B:o.n(`${(null==(u=e.props)?void 0:u.isCenter)?"text-center ":""}font-size-${24*(3-(null==(i=e.props)?void 0:i.level))} text-black`)}:{},{C:e.feId,D:"a03a9caa-1-"+n+",a03a9caa-0",E:o.p({"label-position":"top",label:["questionInfo","questionParagraph","questionTitle"].includes(e.type)?"":e.title})})})),b:o.o(p),c:o.p({block:!0,type:"primary"})})}});wx.createPage(a);
