"use strict";var e=(e,n,o)=>new Promise(((t,u)=>{var r=e=>{try{s(o.next(e))}catch(n){u(n)}},i=e=>{try{s(o.throw(e))}catch(n){u(n)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);s((o=o.apply(e,n)).next())}));const n=require("../../common/vendor.js"),o=require("../../service/index.js");require("../../store/index.js");const t=require("../../store/modules/auth/index.js");require("../../service/helper.js"),require("../../constants/index.js"),require("../../store/modules/count/index.js"),require("../../store/modules/app/index.js"),require("../../composables/useToken.js");if(!Array){((()=>"../../node-modules/nutui-uniapp/components/input/input.js")+(()=>"../../node-modules/nutui-uniapp/components/formitem/formitem.js")+(()=>"../../node-modules/nutui-uniapp/components/button/button.js")+(()=>"../../node-modules/nutui-uniapp/components/form/form.js")+n.resolveComponent("layout-default-uni"))()}const u=n.defineComponent({__name:"user",setup(u){const r=n.ref(""),i=t.useAuthStore(),s=n.ref({});function a(){return e(this,null,(function*(){(yield o.instance.put("/api/user/info",s.value,{headers:{Authorization:`Bearer ${i.token}`}})).data.success?n.index.navigateTo({url:`/pages/question/index?id=${r.value}`}):yield n.index.navigateTo({url:"/pages/index/login"})}))}return n.onLoad((t=>e(this,null,(function*(){r.value=null==t?void 0:t.id;const e=(yield o.instance.get("/api/user/info",{headers:{Authorization:`Bearer ${i.token}`}})).data;e.success||(yield n.index.navigateTo({url:"/pages/index/login"})),s.value=e.data})))),(e,o)=>({a:n.o((e=>n.unref(s).username=e)),b:n.p({placeholder:"请输入姓名",type:"text",modelValue:n.unref(s).username}),c:n.p({label:"用户名"}),d:n.o((e=>n.unref(s).nickname=e)),e:n.p({placeholder:"请输入年龄",type:"text",modelValue:n.unref(s).nickname}),f:n.p({label:"匿名"}),g:n.o((e=>n.unref(s).phone=e)),h:n.p({placeholder:"请输入联系电话",type:"text",modelValue:n.unref(s).phone}),i:n.p({label:"联系方式"}),j:n.o(a),k:n.p({block:!0,type:"primary"})})}});wx.createPage(u);
